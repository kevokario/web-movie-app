import{a as T}from"./chunk-2DGTKGST.js";import{A as y,B as F,Ba as H,C as R,ba as E,g as j,i as C,k as D,na as B,oa as O,pa as V,qa as U,ra as W,s as q,sa as L,t as S,ta as M,u as c,v as x,w as b,y as w}from"./chunk-JSOZJMG2.js";import{Db as g,Eb as A,Ib as d,Mb as o,Nb as n,Ob as s,Tb as _,Vb as h,bd as G,cc as a,gb as m,hb as u,la as P,va as v,wa as N,yb as p}from"./chunk-CRUDNCUI.js";function oe(e,l){e&1&&a(0," Provide valid email address ")}function re(e,l){e&1&&a(0," Email is required ")}function ne(e,l){if(e&1&&(o(0,"mat-error"),p(1,oe,1,0)(2,re,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.email.hasError("email")?1:2)}}function ae(e,l){e&1&&a(0," Provide password ")}function me(e,l){e&1&&a(0," Password should have at least 4 characters ")}function se(e,l){if(e&1&&(o(0,"mat-error"),p(1,ae,1,0)(2,me,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.password.hasError("required")?1:2)}}var Z=(()=>{class e{constructor(r,t,i,f){this.formBuilder=r,this.authService=t,this.uiService=i,this.loaderService=f,this.hide=!0,this.isLoginSubmit=!1}ngOnInit(){this.initLoginForm()}initLoginForm(){this.loginForm=this.formBuilder.group({email:[null,[c.required,c.email]],password:[null,[c.required,c.minLength(4)]]})}get control(){return this.loginForm.controls}loginFormSubmit(){let r=this.loginForm;if(this.isLoginSubmit=!0,this.loginForm.invalid)return;let t=r.getRawValue();this.authService.login(t).pipe().subscribe({error:i=>{let f=i.code.includes("credential")?"Invalid email/password":i.code;this.uiService.showMessage("Error",f)}})}loginWithGmail(){this.authService.loginWithGoogle().pipe().subscribe({error:()=>{this.uiService.showNetworkMessage()}})}static{this.\u0275fac=function(t){return new(t||e)(u(R),u(S),u(T),u(q))}}static{this.\u0275cmp=v({type:e,selectors:[["app-login"]],decls:21,vars:5,consts:[[1,"mt-4",3,"ngSubmit","formGroup"],[1,"col-sm-12"],[1,"col-sm-12","mb-3"],["formControlName","email","prefixIcon","email","label","Email Address","placeholder","Email","type","email"],[1,"col-sm-12","text-end"],["routerLink","/auth/reset-password"],["formControlName","password","prefixIcon","lock","label","Password","type","password","placeholder","******",3,"showInputToggle"],["text","Login"],["text","Login with Google","type","button",1,"w-100",3,"click","btnStyle"],["routerLink","/auth/register"]],template:function(t,i){t&1&&(o(0,"form",0),_("ngSubmit",function(){return i.loginFormSubmit()}),o(1,"div",1)(2,"h4"),a(3,"Login"),n()(),o(4,"div",2),s(5,"app-input",3),p(6,ne,3,1,"mat-error"),n(),o(7,"div",4)(8,"a",5),a(9,"Forgot Password?"),n()(),o(10,"div",2),s(11,"app-input",6),p(12,se,3,1,"mat-error"),n(),o(13,"div",2),s(14,"app-button",7),n(),o(15,"div",2)(16,"app-button",8),_("click",function(){return i.loginWithGmail()}),n()(),o(17,"div",4),a(18," Don't have an account? "),o(19,"a",9),a(20,"Register here!"),n()()()),t&2&&(g("formGroup",i.loginForm),m(6),d(6,i.isLoginSubmit&&i.control.email.invalid?6:-1),m(5),g("showInputToggle",!0),m(),d(12,i.isLoginSubmit&&i.control.password.invalid?12:-1),m(4),g("btnStyle","mat-stroked-button"))},dependencies:[C,E,w,x,b,y,F,L,M]})}}return e})();function le(e,l){e&1&&a(0," Provide your name. ")}function pe(e,l){e&1&&a(0," Name should have at-least 3 characters ")}function de(e,l){if(e&1&&(o(0,"mat-error"),p(1,le,1,0)(2,pe,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.name.hasError("required")?1:2)}}function ce(e,l){e&1&&a(0," Provide your email ")}function ue(e,l){e&1&&a(0," Provide valid email address ")}function fe(e,l){if(e&1&&(o(0,"mat-error"),p(1,ce,1,0)(2,ue,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.email.hasError("required")?1:2)}}function ge(e,l){e&1&&a(0," Provide your password ")}function he(e,l){e&1&&a(0," Password should have at-least 4 characters ")}function ve(e,l){if(e&1&&(o(0,"mat-error"),p(1,ge,1,0)(2,he,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.password.hasError("required")?1:2)}}var $=(()=>{class e{constructor(r,t,i){this.formBuilder=r,this.authService=t,this.uiService=i,this.isRegisterSubmit=!1}ngOnInit(){this.initRegisterForm()}initRegisterForm(){this.registerForm=this.formBuilder.group({name:[null,[c.required,c.minLength(3)]],email:[null,[c.required,c.email]],password:[null,[c.required,c.minLength(4)]]})}get control(){return this.registerForm.controls}registerFormSubmit(){let r=this.registerForm;if(this.isRegisterSubmit=!0,r.invalid)return;let t=r.value;this.authService.register(t).subscribe({error:i=>{let f=i.code.includes("email-already")?" email Already in use":i.code;this.uiService.showMessage("Error",f)}})}static{this.\u0275fac=function(t){return new(t||e)(u(R),u(S),u(T))}}static{this.\u0275cmp=v({type:e,selectors:[["app-register"]],decls:20,vars:5,consts:[[1,"mt-4",3,"ngSubmit","formGroup"],[1,"col-sm-12"],[1,"col-sm-12","mb-3"],["formControlName","name","label","Full names","placeholder","Your Name","type","text","prefixIcon","person"],["label","Email","formControlName","email","placeholder","Email Address","type","email","prefixIcon","email"],["formControlName","password","label","Password","placeholder","******","type","password","prefixIcon","lock",3,"showInputToggle"],[1,"row","mb-3"],["text","Register"],[1,"col-sm-12","text-end"],["routerLink","/auth/login"]],template:function(t,i){t&1&&(o(0,"form",0),_("ngSubmit",function(){return i.registerFormSubmit()}),o(1,"div",1)(2,"h4"),a(3,"Register"),n()(),o(4,"div",2),s(5,"app-input",3),p(6,de,3,1,"mat-error"),n(),o(7,"div",2),s(8,"app-input",4),p(9,fe,3,1,"mat-error"),n(),o(10,"div",2),s(11,"app-input",5),p(12,ve,3,1,"mat-error"),n(),o(13,"div",6)(14,"div",1),s(15,"app-button",7),n()(),o(16,"div",8),a(17," Already have an account? "),o(18,"a",9),a(19,"Login here!"),n()()()),t&2&&(g("formGroup",i.registerForm),m(6),d(6,i.isRegisterSubmit&&i.control.name.invalid?6:-1),m(3),d(9,i.isRegisterSubmit&&i.control.email.invalid?9:-1),m(2),g("showInputToggle",!0),m(),d(12,i.isRegisterSubmit&&i.control.password.invalid?12:-1))},dependencies:[C,E,w,x,b,y,F,L,M]})}}return e})();var ee=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-auth"]],decls:7,vars:2,consts:[["fxLayout","row","fxLayoutGap","1px",1,"full-height"],["fxFlex","50","fxHide.lt-md","",1,"image-div"],["fxFlex","100","fxFlex.md","50",1,"form-div"],["fxLayout","column","fxFlexAlign","start stretch"],[1,"mb-3"],["src","favicon.ico","alt","movie app"]],template:function(t,i){t&1&&(o(0,"div",0),s(1,"div",1),o(2,"div",2)(3,"div",3)(4,"div",4),s(5,"img",5),n(),s(6,"router-outlet"),n()()()),t&2&&(m(),A("background-image","url(assets/movie_poster.jpeg)"))},dependencies:[j,O,V,W,U,B],styles:[".full-height[_ngcontent-%COMP%], .image-div[_ngcontent-%COMP%], .form-div[_ngcontent-%COMP%]{height:100%}.form-div[_ngcontent-%COMP%] > div[fxLayout=column][_ngcontent-%COMP%]{height:100%;justify-content:center;align-items:center}"]})}}return e})();function _e(e,l){e&1&&a(0," Provide valid email address ")}function Ce(e,l){e&1&&a(0," Email is required ")}function Se(e,l){if(e&1&&(o(0,"mat-error"),p(1,_e,1,0)(2,Ce,1,0),n()),e&2){let r,t=h();m(),d(1,(r=!0)===t.control.email.hasError("email")?1:2)}}var te=(()=>{class e{constructor(r,t,i){this.formBuilder=r,this.authService=t,this.uiService=i,this.isResetSubmit=!1}ngOnInit(){this.initResetForm()}initResetForm(){this.resetForm=this.formBuilder.group({email:[null,[c.required,c.email]]})}get control(){return this.resetForm.controls}resetFormSubmit(){let r=this.resetForm;if(this.isResetSubmit=!0,r.invalid)return;let t=r.value.email;this.authService.sendResetPasswordLink(t).subscribe({next:i=>{this.uiService.showMessage("Success","Reset link sent to your email!")},error:i=>this.uiService.showMessage("Error","Failed to send reset password link, Try again later")})}static{this.\u0275fac=function(t){return new(t||e)(u(R),u(S),u(T))}}static{this.\u0275cmp=v({type:e,selectors:[["app-reset-password"]],decls:19,vars:2,consts:[[1,"mt-4",3,"ngSubmit","formGroup"],[1,"col-sm-12"],[1,"col-sm-12","mb-3"],["formControlName","email","prefixIcon","email","label","Email Address","placeholder","Email","type","email"],["text","Reset Password"],[1,"col-sm-12","text-end"],["routerLink","/auth/login"]],template:function(t,i){t&1&&(o(0,"form",0),_("ngSubmit",function(){return i.resetFormSubmit()}),o(1,"div",1)(2,"h4"),a(3,"Reset Password"),n(),o(4,"p"),a(5,"Please provide your registered email."),s(6,"br"),a(7," If we find a match, you'll receive"),s(8,"br"),a(9," instructions to reset your password "),n()(),o(10,"div",2),s(11,"app-input",3),p(12,Se,3,1,"mat-error"),n(),o(13,"div",2),s(14,"app-button",4),n(),o(15,"div",5),a(16," Already have an account? "),o(17,"a",6),a(18,"Login here!"),n()()()),t&2&&(g("formGroup",i.resetForm),m(12),d(12,i.isResetSubmit&&i.control.email.invalid?12:-1))},dependencies:[C,E,w,x,b,y,F,L,M]})}}return e})();var xe=[{path:"",component:ee,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Z},{path:"register",component:$},{path:"reset-password",component:te}]}],ie=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=N({type:e})}static{this.\u0275inj=P({imports:[D.forChild(xe),D]})}}return e})();var Ke=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=N({type:e})}static{this.\u0275inj=P({imports:[G,ie,H]})}}return e})();export{Ke as AuthModule};
